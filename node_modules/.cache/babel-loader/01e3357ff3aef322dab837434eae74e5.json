{"ast":null,"code":"import _objectSpread from\"/home/rajatrajivsharma/Desktop/Web Develpoment/XYZ/XTicket-Tool/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import axios from'axios';import shortid from'shortid';import APP from'../modules/index';var requestId=shortid.generate();axios.interceptors.request.use(function(config){var token=window.localStorage.getItem('_token');config.headers['x-access-channel']='ANDROID';config.headers['Content-Type']='application/json';if(token!=null){config.headers.Authorization=\"Bearer \".concat(token);}return config;},function(err){return Promise.reject(err);});axios.interceptors.response.use(function(config){if(config.headers['content-type']===\"application/download\"){var url=URL.createObjectURL(new Blob([config.data],{type:'application/vnd.ms-excel'}));var link=document.createElement('a');link.href=url;var fileName='download';if(config.config&&config.config.url){var arr=config.config.url.split('/');fileName=arr[arr.length-1]+\"_report.xlsx\";}link.setAttribute('download',fileName);document.body.appendChild(link);link.click();}return config;},function(error){if(401===error.response.status){window.localStorage.removeItem('_token');}return Promise.reject(error);});export var fetch={get:function get(_ref){var url=_ref.url,_ref$requestParams=_ref.requestParams,requestParams=_ref$requestParams===void 0?{}:_ref$requestParams,callbackHandler=_ref.callbackHandler;var ins=axios.get(url,{params:requestParams,requestId:requestId});outputHandler({ins:ins,callbackHandler:callbackHandler});},getExcel:function getExcel(_ref2){var url=_ref2.url,_ref2$requestParams=_ref2.requestParams,requestParams=_ref2$requestParams===void 0?{}:_ref2$requestParams,callbackHandler=_ref2.callbackHandler;var ins=axios.get(url,{params:requestParams,requestId:requestId,responseType:'arraybuffer'});outputHandler({ins:ins,callbackHandler:callbackHandler});},post:function post(_ref3){var url=_ref3.url,_ref3$requestBody=_ref3.requestBody,requestBody=_ref3$requestBody===void 0?{}:_ref3$requestBody,callbackHandler=_ref3.callbackHandler;var ins=axios.post(url,_objectSpread({},requestBody,{requestId:requestId}));outputHandler({ins:ins,callbackHandler:callbackHandler});},delete:function _delete(_ref4){var url=_ref4.url,_ref4$requestBody=_ref4.requestBody,requestBody=_ref4$requestBody===void 0?{}:_ref4$requestBody,callbackHandler=_ref4.callbackHandler;var ins=axios.delete(url,_objectSpread({},requestBody,{requestId:requestId}));outputHandler({ins:ins,callbackHandler:callbackHandler});},put:function put(_ref5){var url=_ref5.url,_ref5$requestBody=_ref5.requestBody,requestBody=_ref5$requestBody===void 0?{}:_ref5$requestBody,callbackHandler=_ref5.callbackHandler;var ins=axios.put(url,_objectSpread({},requestBody,{requestId:requestId}));outputHandler({ins:ins,callbackHandler:callbackHandler});}};var outputHandler=function outputHandler(_ref6){var ins=_ref6.ins,callbackHandler=_ref6.callbackHandler;ins.then(function(response){callbackHandler({status:APP.Constants.SUCCESS,message:'',payload:response.data});}).catch(function(){callbackHandler({status:APP.Constants.FAILURE,message:'Something went worng...',payload:{}});});};","map":{"version":3,"sources":["/home/rajatrajivsharma/Desktop/Web Develpoment/XYZ/XTicket-Tool/src/modules/httpServices.js"],"names":["axios","shortid","APP","requestId","generate","interceptors","request","use","config","token","window","localStorage","getItem","headers","Authorization","err","Promise","reject","response","url","URL","createObjectURL","Blob","data","type","link","document","createElement","href","fileName","arr","split","length","setAttribute","body","appendChild","click","error","status","removeItem","fetch","get","requestParams","callbackHandler","ins","params","outputHandler","getExcel","responseType","post","requestBody","delete","put","then","Constants","SUCCESS","message","payload","catch","FAILURE"],"mappings":"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","sourcesContent":["import axios from 'axios';\nimport shortid from 'shortid';\nimport APP from '../modules/index';\n\nconst requestId = shortid.generate();\n\naxios.interceptors.request.use(function (config) {\n    const token = window.localStorage.getItem('_token');\n\n    config.headers['x-access-channel'] = 'ANDROID';\n    config.headers['Content-Type'] = 'application/json';\n\n    if (token != null) {\n        config.headers.Authorization = `Bearer ${token}`;\n    }\n\n    return config;\n}, function (err) {\n\n    return Promise.reject(err);\n\n});\n\naxios.interceptors.response.use(function (config) {\n    if (config.headers['content-type'] === \"application/download\") {\n        const url = URL.createObjectURL(new Blob([config.data], { type: 'application/vnd.ms-excel' }));\n        const link = document.createElement('a');\n        link.href = url;\n        let fileName = 'download';\n        if (config.config && config.config.url) {\n            let arr = config.config.url.split('/');\n            fileName = arr[arr.length - 1] + \"_report.xlsx\";\n        }\n        link.setAttribute('download', fileName);\n        document.body.appendChild(link);\n        link.click();\n    }\n\n    return config;\n\n}, function (error) {\n    if (401 === error.response.status) {\n        window.localStorage.removeItem('_token');\n    }\n\n    return Promise.reject(error);\n});\n\nexport const fetch = {\n    get({ url, requestParams = {}, callbackHandler }) {\n        const ins = axios.get(url, {\n            params: requestParams,\n            requestId\n        });\n        outputHandler({ ins, callbackHandler });\n    },\n    getExcel({ url, requestParams = {}, callbackHandler }) {\n        const ins = axios.get(url, {\n            params: requestParams,\n            requestId,\n            responseType: 'arraybuffer'\n        });\n        outputHandler({ ins, callbackHandler });\n    },\n\n    post({ url, requestBody = {}, callbackHandler }) {\n        const ins = axios.post(url, { ...requestBody, requestId });\n        outputHandler({ ins, callbackHandler });\n    },\n    delete({ url, requestBody = {}, callbackHandler }) {\n        const ins = axios.delete(url, { ...requestBody, requestId });\n        outputHandler({ ins, callbackHandler });\n    },\n    put({ url, requestBody = {}, callbackHandler }) {\n        const ins = axios.put(url, { ...requestBody, requestId });\n        outputHandler({ ins, callbackHandler });\n    }\n\n};\n\nconst outputHandler = ({ ins, callbackHandler }) => {\n    ins.then((response) => {\n\n        callbackHandler({\n            status: APP.Constants.SUCCESS,\n            message: '',\n            payload: response.data\n        });\n\n    }).catch(() => {\n        callbackHandler({\n            status: APP.Constants.FAILURE,\n            message: 'Something went worng...',\n            payload: {}\n        });\n    });\n\n};"]},"metadata":{},"sourceType":"module"}