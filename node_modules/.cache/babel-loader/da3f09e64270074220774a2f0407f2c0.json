{"ast":null,"code":"import axios from 'axios';\nimport shortid from 'shortid';\nimport APP from '../modules/index';\nconst requestId = shortid.generate();\naxios.interceptors.request.use(function (config) {\n  const token = window.localStorage.getItem('_token');\n  config.headers['x-access-channel'] = 'ANDROID';\n  config.headers['Content-Type'] = 'application/json';\n\n  if (token != null) {\n    config.headers.Authorization = `Bearer ${token}`;\n  }\n\n  return config;\n}, function (err) {\n  return Promise.reject(err);\n});\naxios.interceptors.response.use(function (config) {\n  if (config.headers['content-type'] === \"application/download\") {\n    const url = URL.createObjectURL(new Blob([config.data], {\n      type: 'application/vnd.ms-excel'\n    }));\n    const link = document.createElement('a');\n    link.href = url;\n    let fileName = 'download';\n\n    if (config.config && config.config.url) {\n      let arr = config.config.url.split('/');\n      fileName = arr[arr.length - 1] + \"_report.xlsx\";\n    }\n\n    link.setAttribute('download', fileName);\n    document.body.appendChild(link);\n    link.click();\n  }\n\n  return config;\n}, function (error) {\n  if (401 === error.response.status) {\n    window.localStorage.removeItem('_token');\n  }\n\n  return Promise.reject(error);\n});\nexport const fetch = {\n  get({\n    url,\n    requestParams = {},\n    callbackHandler\n  }) {\n    const ins = axios.get(url, {\n      params: requestParams,\n      requestId\n    });\n    outputHandler({\n      ins,\n      callbackHandler\n    });\n  },\n\n  getExcel({\n    url,\n    requestParams = {},\n    callbackHandler\n  }) {\n    const ins = axios.get(url, {\n      params: requestParams,\n      requestId,\n      responseType: 'arraybuffer'\n    });\n    outputHandler({\n      ins,\n      callbackHandler\n    });\n  },\n\n  post({\n    url,\n    requestBody = {},\n    callbackHandler\n  }) {\n    const ins = axios.post(url, { ...requestBody,\n      requestId\n    });\n    outputHandler({\n      ins,\n      callbackHandler\n    });\n  },\n\n  delete({\n    url,\n    requestBody = {},\n    callbackHandler\n  }) {\n    const ins = axios.delete(url, { ...requestBody,\n      requestId\n    });\n    outputHandler({\n      ins,\n      callbackHandler\n    });\n  },\n\n  put({\n    url,\n    requestBody = {},\n    callbackHandler\n  }) {\n    const ins = axios.put(url, { ...requestBody,\n      requestId\n    });\n    outputHandler({\n      ins,\n      callbackHandler\n    });\n  }\n\n};\n\nconst outputHandler = ({\n  ins,\n  callbackHandler\n}) => {\n  ins.then(response => {\n    callbackHandler({\n      status: APP.Constants.SUCCESS,\n      message: '',\n      payload: response.data\n    });\n  }).catch(() => {\n    callbackHandler({\n      status: APP.Constants.FAILURE,\n      message: 'Something went worng...',\n      payload: {}\n    });\n  });\n};","map":{"version":3,"sources":["/home/rajatrajivsharma/Desktop/Web Develpoment/XYZ/src/modules/httpServices.js"],"names":["axios","shortid","APP","requestId","generate","interceptors","request","use","config","token","window","localStorage","getItem","headers","Authorization","err","Promise","reject","response","url","URL","createObjectURL","Blob","data","type","link","document","createElement","href","fileName","arr","split","length","setAttribute","body","appendChild","click","error","status","removeItem","fetch","get","requestParams","callbackHandler","ins","params","outputHandler","getExcel","responseType","post","requestBody","delete","put","then","Constants","SUCCESS","message","payload","catch","FAILURE"],"mappings":"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","sourcesContent":["import axios from 'axios';\nimport shortid from 'shortid';\nimport APP from '../modules/index';\n\nconst requestId = shortid.generate();\n\naxios.interceptors.request.use(function (config) {\n    const token = window.localStorage.getItem('_token');\n\n    config.headers['x-access-channel'] = 'ANDROID';\n    config.headers['Content-Type'] = 'application/json';\n\n    if (token != null) {\n        config.headers.Authorization = `Bearer ${token}`;\n    }\n\n    return config;\n}, function (err) {\n\n    return Promise.reject(err);\n\n});\n\naxios.interceptors.response.use(function (config) {\n    if (config.headers['content-type'] === \"application/download\") {\n        const url = URL.createObjectURL(new Blob([config.data], { type: 'application/vnd.ms-excel' }));\n        const link = document.createElement('a');\n        link.href = url;\n        let fileName = 'download';\n        if (config.config && config.config.url) {\n            let arr = config.config.url.split('/');\n            fileName = arr[arr.length - 1] + \"_report.xlsx\";\n        }\n        link.setAttribute('download', fileName);\n        document.body.appendChild(link);\n        link.click();\n    }\n\n    return config;\n\n}, function (error) {\n    if (401 === error.response.status) {\n        window.localStorage.removeItem('_token');\n    }\n\n    return Promise.reject(error);\n});\n\nexport const fetch = {\n    get({ url, requestParams = {}, callbackHandler }) {\n        const ins = axios.get(url, {\n            params: requestParams,\n            requestId\n        });\n        outputHandler({ ins, callbackHandler });\n    },\n    getExcel({ url, requestParams = {}, callbackHandler }) {\n        const ins = axios.get(url, {\n            params: requestParams,\n            requestId,\n            responseType: 'arraybuffer'\n        });\n        outputHandler({ ins, callbackHandler });\n    },\n\n    post({ url, requestBody = {}, callbackHandler }) {\n        const ins = axios.post(url, { ...requestBody, requestId });\n        outputHandler({ ins, callbackHandler });\n    },\n    delete({ url, requestBody = {}, callbackHandler }) {\n        const ins = axios.delete(url, { ...requestBody, requestId });\n        outputHandler({ ins, callbackHandler });\n    },\n    put({ url, requestBody = {}, callbackHandler }) {\n        const ins = axios.put(url, { ...requestBody, requestId });\n        outputHandler({ ins, callbackHandler });\n    }\n\n};\n\nconst outputHandler = ({ ins, callbackHandler }) => {\n    ins.then((response) => {\n\n        callbackHandler({\n            status: APP.Constants.SUCCESS,\n            message: '',\n            payload: response.data\n        });\n\n    }).catch(() => {\n        callbackHandler({\n            status: APP.Constants.FAILURE,\n            message: 'Something went worng...',\n            payload: {}\n        });\n    });\n\n};"]},"metadata":{},"sourceType":"module"}