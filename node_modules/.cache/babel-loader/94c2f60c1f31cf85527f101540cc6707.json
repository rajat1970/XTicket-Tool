{"ast":null,"code":"import _objectSpread from\"/home/rajatrajivsharma/Desktop/Web Develpoment/XYZ/XTicket-Tool/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/home/rajatrajivsharma/Desktop/Web Develpoment/XYZ/XTicket-Tool/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/rajatrajivsharma/Desktop/Web Develpoment/XYZ/XTicket-Tool/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/home/rajatrajivsharma/Desktop/Web Develpoment/XYZ/XTicket-Tool/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/home/rajatrajivsharma/Desktop/Web Develpoment/XYZ/XTicket-Tool/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/home/rajatrajivsharma/Desktop/Web Develpoment/XYZ/XTicket-Tool/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React from'react';import{cloneDeep}from'lodash';import{constants}from'../modules/constants';import{fetch}from'../modules/httpServices';import{loginView as LoginView}from'../Views/loginView';import{loginPages as LoginPages}from'../Views/loginPage';var LoginPage=/*#__PURE__*/function(_React$Component){_inherits(LoginPage,_React$Component);function LoginPage(props){var _this;_classCallCheck(this,LoginPage);_this=_possibleConstructorReturn(this,_getPrototypeOf(LoginPage).call(this,props));_this.onInputChange=function(payload){_this.setState(_objectSpread({},_this.state,{},payload));};_this.onSubmitHandler=function(e){e.preventDefault();var _this$state=_this.state,email=_this$state.email,password=_this$state.password;_this.setState({isLoading:true},function(){fetch.post({url:constants.SERVICE_URLS.LOGIN,requestBody:{email:email,password:password},callbackHandler:function callbackHandler(response){console.log(response);var status=response.status,message=response.message,payload=response.payload;var _state=cloneDeep(_this.state);_state.isLoading=false;if(status===constants.SUCCESS){_state.message='';_state.isValid=true;window.localStorage.setItem('_token',payload.token);window.localStorage.setItem('_userInfo',JSON.stringify(payload.result));}else{_state.message=message;_state.isValid=false;window.localStorage.removeItem('_token');}_this.setState(_state,_this.redirectTicketList);}});});};_this.redirectTicketList=function(){var token=window.localStorage.getItem('_token');if(token!=null){_this.props.history.push('/ticketlist');}};_this.state={isLoading:false,email:'',password:'',isValid:true};return _this;}_createClass(LoginPage,[{key:\"componentDidMount\",value:function componentDidMount(){this.redirectTicketList();}},{key:\"render\",value:function render(){return(// <LoginView\n//     {...{\n//         ...this.state,\n//         onInputChange: this.onInputChange,\n//         onSubmitHandler: this.onSubmitHandler\n//     }}\n// />\nReact.createElement(LoginPages,_objectSpread({},this.state,{onInputChange:this.onInputChange,onSubmitHandler:this.onSubmitHandler})));}}]);return LoginPage;}(React.Component);export{LoginPage as default};","map":{"version":3,"sources":["/home/rajatrajivsharma/Desktop/Web Develpoment/XYZ/XTicket-Tool/src/pages/LoginPage.js"],"names":["React","cloneDeep","constants","fetch","loginView","LoginView","loginPages","LoginPages","LoginPage","props","onInputChange","payload","setState","state","onSubmitHandler","e","preventDefault","email","password","isLoading","post","url","SERVICE_URLS","LOGIN","requestBody","callbackHandler","response","console","log","status","message","_state","SUCCESS","isValid","window","localStorage","setItem","token","JSON","stringify","result","removeItem","redirectTicketList","getItem","history","push","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { cloneDeep } from 'lodash';\nimport { constants } from '../modules/constants';\nimport { fetch } from '../modules/httpServices';\nimport { loginView as LoginView } from '../Views/loginView';\nimport { loginPages as LoginPages } from '../Views/loginPage';\n\nexport default class LoginPage extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            isLoading: false,\n            email: '',\n            password: '',\n            isValid: true\n        };\n    }\n\n    componentDidMount() {\n        this.redirectTicketList();\n    }\n\n\n    onInputChange = (payload) => {\n        this.setState({ ...this.state, ...payload });\n    }\n\n    onSubmitHandler = (e) => {\n        e.preventDefault();\n\n        const { email, password } = this.state;\n\n        this.setState({ isLoading: true }, () => {\n            fetch.post({\n                url: constants.SERVICE_URLS.LOGIN,\n                requestBody: {\n                    email,\n                    password\n                },\n                callbackHandler: (response) => {\n                    console.log(response)\n                    const { status, message, payload } = response;\n                    const _state = cloneDeep(this.state);\n\n                    _state.isLoading = false;\n\n                    if (status === constants.SUCCESS) {\n                        _state.message = '';\n                        _state.isValid = true;\n                        window.localStorage.setItem('_token', payload.token);\n                        window.localStorage.setItem('_userInfo', JSON.stringify(payload.result));\n                    } else {\n                        _state.message = message;\n                        _state.isValid = false;\n                        window.localStorage.removeItem('_token');\n                    }\n\n                    this.setState(_state, this.redirectTicketList);\n\n\n                }\n            });\n\n        });\n    }\n\n    redirectTicketList = () => {\n        const token = window.localStorage.getItem('_token');\n        if (token != null) {\n            this.props.history.push('/ticketlist');\n        }\n    }\n\n    render() {\n        return (\n            // <LoginView\n            //     {...{\n            //         ...this.state,\n            //         onInputChange: this.onInputChange,\n            //         onSubmitHandler: this.onSubmitHandler\n            //     }}\n            // />\n            <LoginPages {...{\n                ...this.state,\n                onInputChange: this.onInputChange,\n                onSubmitHandler: this.onSubmitHandler\n            }} />\n        );\n    }\n\n}"]},"metadata":{},"sourceType":"module"}